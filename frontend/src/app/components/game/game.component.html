<div class="game-container">
  <!-- Main Game Area -->
  <main class="game-main">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading">
      <div class="spinner"></div>
      <p>Åadowanie...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !isLoading" class="error">
      <h3>ğŸ˜• Ups!</h3>
      <p>{{ error }}</p>
      <button class="btn btn-primary" (click)="loadNextSong()">
        SprÃ³buj ponownie
      </button>
    </div>

    <!-- Song Display -->
    <div *ngIf="currentSong && !isLoading && !error" 
         class="song-card"
         [class.swipe-left]="swipeState.direction === 'left'"
         [class.swipe-right]="swipeState.direction === 'right'"
         [class.slide-out-left]="swipeState.isSlideOutActive && swipeState.slideDirection === 'left'"
         [class.slide-out-right]="swipeState.isSlideOutActive && swipeState.slideDirection === 'right'"
         [class.slide-in]="swipeState.isNewCard"
         [style.transform]="swipeState.isSlideOutActive ? '' : 'translateX(' + swipeState.offset + 'px)'"
         (touchstart)="onTouchStart($event)"
         (touchend)="onTouchEnd($event)"
         (touchmove)="onTouchMove($event)">
      <div class="song-info">
        <h2 class="song-title">{{ currentSong.name }}</h2>
        <p class="song-artist">{{ currentSong.artist }}</p>
        <p class="song-year">Wydano w roku <strong>{{ currentSong.year }}</strong></p>
        <p class="swipe-hint">ğŸ’¡ PrzesuÅ„ w lewo, aby pominÄ…Ä‡; przesuÅ„ w prawo, aby zaznaczyÄ‡ jako OK</p>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button 
          class="btn btn-warning" 
          (click)="onSkip()"
          [attr.aria-label]="'Skip ' + currentSong.name">
          â­ï¸ PomiÅ„
        </button>
        <button 
          class="btn btn-success" 
          (click)="onCorrect()"
          [attr.aria-label]="'Mark ' + currentSong.name + ' as correct'">
          âœ… OK
        </button>
      </div>
    </div>
  </main>

  <!-- Bottom Bar with Title, Stats, and Reset -->
  <footer class="game-footer">
    <div class="footer-left">
      <div class="timer-section" [ngClass]="{'time-warning': isTimeRunningOut}">
        <div class="timer-icon">â°</div>
        <div class="timer-display">{{ formatTime(timeLeft) }}</div>
      </div>
    </div>
    
    <div class="footer-center">
      <div class="score-section">
        <div class="score">{{ score }}/{{ totalSongs }}</div>
        <div class="success-rate" *ngIf="totalSongs > 0">
          {{ successRate }}%
        </div>
      </div>
    </div>
    
    <div class="footer-right">
      <button 
        class="btn btn-reset" 
        (click)="resetGame()"
        aria-label="Reset the game">
        ğŸ”„ Restart
      </button>
    </div>
  </footer>
</div>
